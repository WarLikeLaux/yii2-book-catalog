# Yii2 Book Catalog System

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **Clean Architecture** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **PHP 8.4** –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –≤—ã–Ω–æ—Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π ActiveRecord, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **PHP 8.4** (Strict Types, Constructor Promotion, Readonly Classes, Union Types).
*   **Framework:** Yii2 Basic Template.
*   **Database:** MySQL 8.0.
*   **Async Processing:** `yii2-queue` (DB driver).
*   **Infrastructure:** Docker / Docker Compose.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏–∑–±–µ–≥–∞–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ "Fat Model / Fat Controller" –≤ –ø–æ–ª—å–∑—É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è.

### 1. Service Layer (`app/services`)
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç HTTP-—Å–ª–æ—è. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–æ–ª—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (–ø—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ ‚Üí –æ—Ç–≤–µ—Ç).
*   **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–æ–≤.
*   **–ò–∑–æ–ª—è—Ü–∏—è:** –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç `Yii::$app->request`, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

### 2. DTO & Form Models (`app/models/forms`)
–î–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Form Objects), –∞ –Ω–µ ActiveRecord —Å—É—â–Ω–æ—Å—Ç–∏.
*   –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∏—Å—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ (`UploadedFile`) –∏ —Å–ª–æ–∂–Ω—ã–µ —Å–≤—è–∑–∏ (Many-to-Many) –¥–æ –º–æ–º–µ–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î.
*   ActiveRecord –º–æ–¥–µ–ª–∏ (`app/models`) –æ—Ç–≤–µ—á–∞—é—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É –ë–î.

### 3. Dependency Injection & Interfaces (`app/interfaces`)
–í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏:
*   `SmsSenderInterface`: –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–∞–ª—å–Ω—ã–º SMS-—à–ª—é–∑–æ–º –∏ Mock-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π (–∑–∞–ø–∏—Å—å –≤ –ª–æ–≥).
*   `FileStorageInterface`: –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (—Å–µ–π—á–∞—Å Local, –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ S3 –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏).

### 4. Asynchronous Jobs (`app/jobs`)
–¢—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–∞—Å—Å—ã–ª–∫–∞ SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º) –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Ñ–æ–Ω–æ–≤—É—é –æ—á–µ—Ä–µ–¥—å, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
app/
‚îú‚îÄ‚îÄ commands/          # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (Seeding, etc)
‚îú‚îÄ‚îÄ controllers/       # HTTP —Å–ª–æ–π (–¢–æ–ª—å–∫–æ —Ä–æ—É—Ç–∏–Ω–≥ –∏ –ø–µ—Ä–≤–∏—á–Ω–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ)
‚îú‚îÄ‚îÄ interfaces/        # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã (Interfaces)
‚îú‚îÄ‚îÄ jobs/              # –ó–∞–¥–∞—á–∏ –æ—á–µ—Ä–µ–¥–∏ (Queue Jobs)
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ forms/         # DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ ...            # ActiveRecord —Å—É—â–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ services/          # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Domain Layer)
‚îÇ   ‚îú‚îÄ‚îÄ sms/           # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã SMS
‚îÇ   ‚îî‚îÄ‚îÄ storage/       # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
‚îî‚îÄ‚îÄ views/             # –®–∞–±–ª–æ–Ω—ã (Bootstrap 5)
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω. –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Makefile`.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
make init
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000](http://localhost:8000)

### –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `make up` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
| `make down` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
| `make seed` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (–ê–≤—Ç–æ—Ä—ã, –ö–Ω–∏–≥–∏) |
| `make queue-info` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á |
| `make sms-logs` | –ß–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS (tail -f) |
| `make shell` | –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Ñ–∞–π–ª `.env` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ `.env.example` –ø—Ä–∏ `make init`).

**–ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
*   `SMS_API_KEY`: API –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
    *   –ó–Ω–∞—á–µ–Ω–∏–µ `MOCK_KEY` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –≤–∫–ª—é—á–∞–µ—Ç —ç–º—É–ª—è—Ü–∏—é: SMS –ø–∏—à—É—Ç—Å—è –≤ –ª–æ–≥ (`runtime/logs/sms.log`), —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

## üß™ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

1.  **–ö–∞—Ç–∞–ª–æ–≥:** –î–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º (–ì–æ—Å—Ç—å/–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å).
2.  **–ü–æ–¥–ø–∏—Å–∫–∞:** –ù–∞–∂–º–∏—Ç–µ "+" —Ä—è–¥–æ–º —Å –∞–≤—Ç–æ—Ä–æ–º. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ AJAX.
3.  **–ê–¥–º–∏–Ω–∫–∞:** –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å `admin/admin` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Yii2). –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–Ω–∏–≥–∏ —Å –æ–±–ª–æ–∂–∫–∞–º–∏ –∏ –∞–≤—Ç–æ—Ä–∞–º–∏.
4.  **–°–æ–±—ã—Ç–∏—è:** –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–æ—Ä–∫–µ—Ä –æ—á–µ—Ä–µ–¥–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∞–≤—Ç–æ—Ä–æ–≤ —ç—Ç–æ–π –∫–Ω–∏–≥–∏ –∏ "–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç" –∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
5.  **–û—Ç—á–µ—Ç:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/report` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¢–û–ü-10 –∞–≤—Ç–æ—Ä–æ–≤ –∑–∞ –≥–æ–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π SQL/QueryBuilder –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏).