# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

[‚Üê –ù–∞–∑–∞–¥ –≤ README](../README.md)

–í –¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å–∞–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ–µ–∫—Ç–∞. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –∫–æ–¥–∞ (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Yii2 MVC, MVC —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º —Å–ª–æ–µ–º –∏ Clean Architecture) –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ –≤ [docs/COMPARISON.md](COMPARISON.md). –¢–∞–∫–∂–µ –º—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤—Å–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã ‚Äî —Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø—Ä–∏–Ω—è–ª–∏ —Ä–∞–¥–∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–π –∏ –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º, –≤ —Ñ–∞–π–ª–µ [docs/DECISIONS.md](DECISIONS.md).

## üìå –ù–∞–≤–∏–≥–∞—Ü–∏—è

- [üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ Clean Architecture](#-–≥–ª–∞–≤–Ω–æ–µ-–ø—Ä–∞–≤–∏–ª–æ-clean-architecture)
- [üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ C4 model](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-c4-model)
- [üß≠ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-—Ä–µ—à–µ–Ω–∏—è)
  - [1. –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Use Cases, CQS, Ports)](#1-—Å–ª–æ–π-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-use-cases-cqs-ports)
  - [2. –°–ª–æ–π –¥–æ–º–µ–Ω–∞ (Rich Domain Model)](#2-—Å–ª–æ–π-–¥–æ–º–µ–Ω–∞-rich-domain-model)
  - [3. –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Yii2)](#3-—Å–ª–æ–π-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è-yii2)
  - [4. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: Use Cases vs —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è](#4-—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏-use-cases-vs-—Å–µ—Ä–≤–∏—Å—ã-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
  - [5. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ](#5-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∏-–æ–∫—Ä—É–∂–µ–Ω–∏–µ)
  - [6. DTO –∏ —Ñ–æ—Ä–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏](#6-dto-–∏-—Ñ–æ—Ä–º—ã-–¥–ª—è-–≤–∞–ª–∏–¥–∞—Ü–∏–∏)
  - [7. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π](#7-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π-—Å–ª–æ–π)
  - [8. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã](#8-–∫–∞—á–µ—Å—Ç–≤–æ-–∫–æ–¥–∞-–∏-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã)
  - [9. –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (Specification)](#9-–≥–∏–±—Ä–∏–¥–Ω—ã–π-–ø–æ–∏—Å–∫-specification)
  - [10. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (fan-out)](#10-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏-fan-out)
  - [11. –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ](#11-–ø–∞–≥–∏–Ω–∞—Ü–∏—è-–∏-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
  - [12. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#12-–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
  - [13. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞](#13-–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å-–∏-—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞)
  - [14. –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ (CAS)](#14-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ-—Ñ–∞–π–ª–æ–≤-cas)
  - [15. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —è–¥—Ä–æ](#15-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ-—è–¥—Ä–æ)
  - [16. –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (AutoMapper –∏ Hydrator)](#16-–º–∞–ø–ø–∏–Ω–≥-–¥–∞–Ω–Ω—ã—Ö-automapper-–∏-hydrator)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)

---

## üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ Clean Architecture

> **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –µ—ë –≤—ã–∑—ã–≤–∞—é—Ç –∏ –∫—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ.**

```
–í–Ω–µ—à–Ω–∏–µ —Å–ª–æ–∏ (–∑–∞–≤–∏—Å—è—Ç –æ—Ç Yii2):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PRESENTATION   ‚îÇ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Ñ–æ—Ä–º—ã, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  INFRASTRUCTURE ‚îÇ ActiveRecord, Queue, Repositories       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì –∑–∞–≤–∏—Å—è—Ç –æ—Ç ‚Üì
–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–ª–æ–∏ (—á–∏—Å—Ç—ã–π PHP, –±–µ–∑ Yii):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  APPLICATION    ‚îÇ UseCases, Commands, Queries, Ports      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  DOMAIN         ‚îÇ Entities, Value Objects, Events          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

`application/` –∏ `domain/` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Yii2 (–≤ —ç—Ç–∏—Ö —Å–ª–æ—è—Ö –Ω–µ—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ `Yii`), –∞ `presentation/` –∏ `infrastructure/` —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ C4 model

–î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–µ–ª—å C4.

### Level 1: system context

**–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º—ã —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º.**

```mermaid
graph TD
    User((User/Admin))
    System[Book Catalog System]
    SMS["SMS Provider (External)"]
    Jaeger["Jaeger (Tracing)"]

    User -- "Browses & Manages Books" --> System
    System -- "Sends Notifications" --> SMS
    System -- "Sends Traces" --> Jaeger

    style System fill:#1168bd,stroke:#0b4884,color:#ffffff
    style SMS fill:#999999,stroke:#666666,color:#ffffff
    style Jaeger fill:#999999,stroke:#666666,color:#ffffff
```

### Level 2: containers

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Docker).**

```mermaid
graph TD
    User((User))

    subgraph DockerHost ["Docker Host"]
        Nginx["Nginx (Web Server)"]
        PHP["PHP-FPM (Application)"]
        Worker["Queue Worker (PHP CLI)"]
        DB[("Database (MySQL / PgSQL)")]
        Redis[("Redis (Cache)")]
    end

    SMS["SMS Provider"]

    User -- HTTPS --> Nginx
    Nginx -- FastCGI --> PHP

    PHP -- Read/Write --> DB
    PHP -- Push Jobs --> DB
    PHP -- Cache --> Redis

    Worker -- Pop Jobs --> DB
    Worker -- Read/Write --> DB
    Worker -- API Calls --> SMS

    style PHP fill:#1168bd,stroke:#0b4884,color:#ffffff
    style Worker fill:#1168bd,stroke:#0b4884,color:#ffffff
    style DB fill:#2f95c4,stroke:#206a8c,color:#ffffff
    style Redis fill:#2f95c4,stroke:#206a8c,color:#ffffff
```

–û—á–µ—Ä–µ–¥—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `yii\queue\db\Queue` (–∑–∞–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MySQL –∏–ª–∏ PostgreSQL). Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫—ç—à.

### Level 3: components (—Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Clean Architecture).**

```mermaid
graph TD
    subgraph Presentation ["–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Yii2)"]
        Controller[Web Controller]
        Handler[Command Handler]
        Mapper[Mapper]
        Filter[Idempotency Filter]
    end

    subgraph Application ["–°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Pure PHP)"]
        UseCase[Use Case]
        Port["Outbound Port (Interface)"]
    end

    subgraph Domain ["–°–ª–æ–π –¥–æ–º–µ–Ω–∞ (Pure PHP)"]
        Entity[Domain Entity]
        VO[Value Object]
        Event[Domain Event]
    end

    subgraph Infrastructure ["–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π"]
        RepoImpl[Repository/QueryService Impl]
        Adapter[Adapter Impl]
        AR[ActiveRecord]
        Job[Queue Job]
    end

    DB[(Database)]

    %% Request Flow
    Controller -- "1. Form DTO" --> Handler
    Handler -- "2. Map to Command" --> Mapper
    Handler -- "3. Execute Command" --> UseCase
    Filter -- "Mutex Lock" --> Handler

    %% Logic Flow
    UseCase -- "4. Business Logic" --> Entity
    Entity -- "5. Rules" --> VO
    UseCase -- "6. Publish Event" --> Port
    UseCase -- "7. Save" --> Port

    %% Infra Implementation
    RepoImpl -.->|"Implements"| Port
    Adapter -.->|"Implements"| Port

    RepoImpl -- "8. Map to AR" --> AR
    AR -- "9. SQL" --> DB

    Adapter -- "Async" --> Job

    style UseCase fill:#1168bd,stroke:#0b4884,color:#ffffff
    style Entity fill:#1168bd,stroke:#0b4884,color:#ffffff
    style VO fill:#1168bd,stroke:#0b4884,color:#ffffff
```

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

---

## üß≠ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Use Cases, CQS, Ports)

–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ CQS, –∞ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–æ—Ä—Ç—ã:

- **–ó–∞–ø–∏—Å—å (–∫–æ–º–∞–Ω–¥—ã):** –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏, –ø–æ–¥–ø–∏—Å–∫–∞) - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π **Use Case**. –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ **Command DTO**.
- **–ß—Ç–µ–Ω–∏–µ (–∑–∞–ø—Ä–æ—Å—ã):** read-side —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç—ã (`BookFinderInterface`, `BookSearcherInterface`). –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ (Query Services) ‚Äî —Ç–æ–ª—å–∫–æ –≤ `infrastructure/queries/`. Read DTO (`BookReadDto`, `ReportDto` –∏ —Ç.–ø.) ‚Äî –≤ `application/*/queries` (—Å–º. DECISIONS.md ¬ß15).
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç DTO-only –¥–ª—è `application/*/queries`:** –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ç–æ–ª—å–∫–æ** read DTO –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞. –ó–∞–ø—Ä–µ—â–µ–Ω—ã: —Å–µ—Ä–≤–∏—Å—ã, Use Cases, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `infrastructure`, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞. –†–∞–∑—Ä–µ—à–µ–Ω—ã: `final readonly` –∫–ª–∞—Å—Å—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –ø—Ä–æ—Å—Ç—ã–µ –≥–µ—Ç—Ç–µ—Ä—ã, `with*()`-–º–µ—Ç–æ–¥—ã, `JsonSerializable`. –ü—Ä–æ–≤–µ—Ä–∫–∞: phparkitect (final, readonly, NotDependsOn infra).
- **–ü–æ—Ä—Ç—ã:** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `application/ports` –ø–æ–∑–≤–æ–ª—è—é—Ç –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 2. –°–ª–æ–π –¥–æ–º–µ–Ω–∞ (Rich Domain Model)

–ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–∏–∑–Ω–µ—Å-—Å—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤–µ–±—É –∏ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

- **Rich Entities:** —Å—É—â–Ω–æ—Å—Ç—å `Book` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–º –∏ –∞–≤—Ç–æ—Ä–∞–º–∏, —Å–æ–±–ª—é–¥–∞—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã–π ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `Book::create()`, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ë–î —á–µ—Ä–µ–∑ `Book::reconstitute()`.
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç–∏:** –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `private(set)` –∏ –º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã.
- **Value Objects:** `Isbn`, `BookYear`, `StoredFileReference`, `FileContent`, `FileKey` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.
- **Status FSM:** —Å—Ç–∞—Ç—É—Å –∫–Ω–∏–≥–∏ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BookStatus` enum (—á–µ—Ä–Ω–æ–≤–∏–∫ / –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ / –≤ –∞—Ä—Ö–∏–≤–µ) —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —á–µ—Ä–µ–∑ `transitionTo(target, policy)`.
- **Domain Events:** `BookStatusChangedEvent`, `BookUpdatedEvent`, `BookDeletedEvent` –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º—É—Ç–∞—Ü–∏–∏ –∏ —Å–≤—è–∑—ã–≤–∞—é—Ç —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –ø—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- **Domain Guards:** `replaceAuthors()` –∑–∞–ø—Ä–µ—â–∞–µ—Ç —É–±–∏—Ä–∞—Ç—å –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤ —É –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö/–∞—Ä—Ö–∏–≤–Ω—ã—Ö –∫–Ω–∏–≥.
- **Specifications:** –ø–æ–∏—Å–∫ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `domain/specifications` (`FullTextSpecification`, `IsbnPrefixSpecification`, `AuthorSpecification`, `StatusSpecification`, `YearSpecification`, `CompositeAndSpecification`, `CompositeOrSpecification`).

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 3. –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Yii2)

–°–ª–æ–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ UI, HTTP –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ–Ω–∫–∏–µ, –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ try/catch `ApplicationException`.
- **–§–æ—Ä–º—ã:** –≤–∞–ª–∏–¥–∞—Ü–∏—è HTTP-–≤–≤–æ–¥–∞ –≤ `presentation/*/forms`.
- **Handlers & view factories:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UI.
- **Read DTO:** —á—Ç–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–µ–Ω–æ –æ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `BookReadDto`.
- **–§–∏–ª—å—Ç—Ä—ã:** –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ rate limit –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.
- **WebOperationRunner:** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ Use Cases, —Ä–∞–±–æ—Ç–∞ —Å pipeline –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
- **Command Pipeline:** —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ middleware.
- **HTMX:** —Ñ—Ä–æ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTMX –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π –ø–æ–¥–≥—Ä—É–∑–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 4. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: Use Cases vs —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

**Use Cases (—Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:

- –†–∞–±–æ—Ç–∞—é—Ç —Å Command/DTO –æ–±—ä–µ–∫—Ç–∞–º–∏;
- –ù–µ –∑–Ω–∞—é—Ç –æ —Ñ–æ—Ä–º–∞—Ö, HTTP –∏ —Ñ–æ—Ä–º–∞—Ç–µ –æ—Ç–≤–µ—Ç–∞;
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã –æ—Ç —Å–ø–æ—Å–æ–±–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

**–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ Handlers –∏ view factories:

- **Command Handlers:** –º–∞–ø–ø—è—Ç —Ñ–æ—Ä–º—É –≤ –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ `CommandMapper` –∏ –≤—ã–∑—ã–≤–∞—é—Ç Use Case —á–µ—Ä–µ–∑ `WebOperationRunner`.
- **View factories:** –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç HTTP –∏ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É.

**–ü—Ä–∏–º–µ—Ä —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**

```php
// presentation/controllers/BookController.php
public function actionCreate(): string|Response
{
    $form = $this->itemViewFactory->createForm();

    if (!$this->request->isPost || !$form->loadFromRequest($this->request)) {
        return $this->renderCreateForm($form);
    }

    if ($this->request->isAjax) {
        return $this->asJson(ActiveForm::validate($form));
    }

    if (!$form->validate()) {
        return $this->renderCreateForm($form);
    }

    try {
        $bookId = $this->commandHandler->createBook($form);
        return $this->redirect(['view', 'id' => $bookId]);
    } catch (ApplicationException $e) {
        $this->addFormError($form, $e);
        return $this->renderCreateForm($form);
    }
}
```

```php
// presentation/books/handlers/BookCommandHandler.php
public function createBook(BookForm $form): int
{
    $cover = $this->operationRunner->runStep(
        fn(): ?string => $this->processCoverUpload($form),
        'Failed to upload book cover',
    );

    if ($form->cover instanceof UploadedFile && $cover === null) {
        throw new OperationFailedException('file.error.storage_operation_failed', field: 'cover');
    }

    $command = $this->commandMapper->toCreateCommand($form, $cover);

    $result = $this->operationRunner->executeAndPropagate(
        $command,
        $this->createBookUseCase,
        Yii::t('app', 'book.success.created'),
    );
    assert(is_int($result));

    return $result;
}
```

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 5. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É MySQL –∏ PostgreSQL —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `DB_DRIVER` –∏ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ `config/db.php`.
- –û—á–µ—Ä–µ–¥—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `HandlerAwareQueue`, –∑–∞–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ.
- –í—Ä–µ–º—è –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `Psr\Clock\ClockInterface` –∏ `SystemClock`.
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å Jaeger OTLP.
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `make shell`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 6. DTO –∏ —Ñ–æ—Ä–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

- –§–æ—Ä–º—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç HTTP-–≤–≤–æ–¥ –≤ `presentation/*/forms`.
- –ö–æ–º–∞–Ω–¥—ã (`CreateBookCommand`, `UpdateBookCommand`) –∂–∏–≤—É—Ç –≤ `application/*/commands`.
- Read-side DTO (`BookReadDto`, `ReportDto` –∏ –¥—Ä.) ‚Äî –≤ `application/*/queries`. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç DTO-only:** —Ç–æ–ª—å–∫–æ `final readonly` –∫–ª–∞—Å—Å—ã-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –±–µ–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Query Services ‚Äî —Ç–æ–ª—å–∫–æ –≤ `infrastructure/queries` (—Å–º. DECISIONS ¬ß15).
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ `PaginationDto` –∏ `PagedResultInterface`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 7. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π

- ActiveRecord –º–æ–¥–µ–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ `infrastructure/persistence` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ Query Services —Ä–µ–∞–ª–∏–∑—É—é—Ç –ø–æ—Ä—Ç—ã –≤ `infrastructure/repositories` –∏ `infrastructure/queries`.
- –°–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `YiiEventPublisherAdapter`, –º–∞–ø–ø–∏–Ω–≥ –≤ jobs –¥–µ–ª–∞–µ—Ç `EventToJobMapper`.
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ –≤ `infrastructure/persistence/Book.php` —á–µ—Ä–µ–∑ `OptimisticLockBehavior`, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è –≤ `StaleDataException`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 8. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (`declare(strict_types=1)`) –≤–æ –≤—Å–µ—Ö PHP-—Ñ–∞–π–ª–∞—Ö.
- PHPStan level 9, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `infrastructure/phpstan`.
- PHPStan –ø—Ä–∞–≤–∏–ª–∞: `QueryPortsMustReturnDtoRule`, `NoActiveRecordInDomainOrApplicationRule`, `NoGhostQueryServiceInApplicationRule`, `DomainEntitiesMustBePureRule`, `DomainIsCleanRule`, `DisallowDateTimeRule`, `DisallowYiiTOutsideAdaptersRule`, `StrictRepositoryReturnTypeRule`, `UseCaseMustBeFinalRule`, `ValueObjectMustBeFinalRule`.
- Rector –¥–ª—è –∞–≤—Ç–æ-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.
- –ö–æ–¥-—Å—Ç–∞–π–ª —á–µ—Ä–µ–∑ `phpcs.xml.dist`.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ Deptrac –∏ Arkitect.
- Arkitect: `application/*/queries` ‚Äî final, readonly, NotDependsOn(infrastructure) (–∫–æ–Ω—Ç—Ä–∞–∫—Ç DTO-only).

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 9. –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (Specification)

- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ `BookSearchSpecificationFactory`.
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`FullTextSpecification`, `IsbnPrefixSpecification`, `AuthorSpecification`, `StatusSpecification`, `YearSpecification`) –∂–∏–≤—É—Ç –≤ `domain/specifications`.
- –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`CompositeAndSpecification`, `CompositeOrSpecification`) –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏.
- `ActiveQueryBookSpecificationVisitor` —Å—Ç—Ä–æ–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥ MySQL/PgSQL –∏ –¥–µ–ª–∞–µ—Ç fallback –Ω–∞ `LIKE`.
- –î–ª—è ISBN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫, –¥–ª—è –≥–æ–¥–∞ ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.
- –ü–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä–∞–º –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å.
- –ü—É–±–ª–∏—á–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `searchPublished()` ‚Äî –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥ —á–µ—Ä–µ–∑ `StatusSpecification`.
- –í UI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTMX –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 10. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (fan-out)

–ß—Ç–æ–±—ã —Ç—è–∂–µ–ª—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ —Ç–æ—Ä–º–æ–∑–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. –°—É—â–Ω–æ—Å—Ç—å Book —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏ `transitionTo()`; —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏–∫—É–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ `save()`.
2. `EventJobMappingRegistry` –º–∞–ø–ø–∏—Ç —Å–æ–±—ã—Ç–∏–µ –≤ `NotifySubscribersJob` —É—Å–ª–æ–≤–Ω–æ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å = `Published`).
3. `NotifySubscribersHandler` —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π `NotifySingleSubscriberJob` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞.

–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ñ–æ–Ω–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `AsyncIdempotencyStorageInterface` –≤–Ω—É—Ç—Ä–∏ `NotifySingleSubscriberHandler`.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Ä–∞–∑—É, –∞ —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ —Ñ–æ–Ω–µ.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 11. –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- Query Services –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `PagedResultInterface` —Å `PaginationDto`.
- Query Services –Ω–µ –æ—Ç–¥–∞—é—Ç `ActiveDataProvider`, —á—Ç–æ–±—ã –Ω–µ —Ç–∞—â–∏—Ç—å Yii2 –≤ —Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –í presentation-layer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä `PagedResultDataProvider`.
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ReportQueryServiceCachingDecorator`, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è - —á–µ—Ä–µ–∑ `ReportCacheInvalidationListener`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 12. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `config/container/*.php`.
- –í —Å–ª–æ—è—Ö application/domain –Ω–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ `Yii::$app`.
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –æ—Å—Ç–∞—é—Ç—Å—è DTO –±–ª–∞–≥–æ–¥–∞—Ä—è `HandlerAwareQueue` –∏ `JobHandlerRegistry`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 13. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `TracingMiddleware`.
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (`*TracingDecorator`) –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, Query Services –∏ –æ—á–µ—Ä–µ–¥—å.
- –°–±–æ—Ä —Ç—Ä–µ–π—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö OpenTelemetry (OTLP) —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ Jaeger.
- –í –ø–∞–Ω–µ–ª–∏ Jaeger –¥–æ—Å—Ç—É–ø–Ω—ã waterfall timeline, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–∑–æ–≤–æ–≤ RPC, –∏ –ø–æ–∏—Å–∫ —Ç—Ä–µ–π—Å–æ–≤ –ø–æ —Ç–µ–≥–∞–º.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 14. –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ (CAS)

- –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `ContentAddressableStorage`.
- –ö–ª—é—á–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `FileKey`, –∞ –¥–æ–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `StoredFileReference`.
- –ò–º—è —Ñ–∞–π–ª–∞ = sha256 –æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, —á—Ç–æ –¥–∞–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é.
- –î–æ–º–µ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø—É—Ç—è—Ö –∫ —Ñ–∞–π–ª–∞–º, –æ–Ω –æ–ø–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 15. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —è–¥—Ä–æ

- `BaseActiveRecordRepository` —Å–æ–¥–µ—Ä–∂–∏—Ç Identity Map –Ω–∞ –æ—Å–Ω–æ–≤–µ `WeakMap`, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –æ—à–∏–±–∫–∏ –ë–î –≤ –¥–æ–º–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `StaleObjectException` ‚Üí `StaleDataException`.
- `BaseQueryService` —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –º–∞–ø–ø–∏–Ω–≥ –≤ DTO.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

### 16. –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (AutoMapper –∏ Hydrator)

- Read-side –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AutoMapper` –∏ –∞—Ç—Ä–∏–±—É—Ç—ã `#[MapTo]` –≤ ActiveRecord –º–æ–¥–µ–ª—è—Ö.
- Write-side –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ActiveRecordHydrator` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `BookRepository`).

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
domain/                 - –°–ª–æ–π –¥–æ–º–µ–Ω–∞ (Business Logic)
  ‚îú‚îÄ‚îÄ common/           - –û–±—â–∏–µ –¥–æ–º–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  ‚îú‚îÄ‚îÄ entities/         - –°—É—â–Ω–æ—Å—Ç–∏ (Rich Model)
  ‚îú‚îÄ‚îÄ events/           - Domain Events
  ‚îú‚îÄ‚îÄ exceptions/       - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞
  ‚îú‚îÄ‚îÄ services/         - Domain Services (—Ä–µ–¥–∫–æ)
  ‚îú‚îÄ‚îÄ specifications/   - Specifications (criteria)
  ‚îú‚îÄ‚îÄ values/           - Value Objects (Immutable)
  application/            - –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Application Logic)
  ‚îú‚îÄ‚îÄ common/           - –û–±—â–∏–µ DTO –∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
  ‚îú‚îÄ‚îÄ ports/            - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Ports)
  ‚îú‚îÄ‚îÄ {{module}}/
  ‚îÇ   ‚îú‚îÄ‚îÄ commands/     - DTO –∫–æ–º–∞–Ω–¥ (Write)
  ‚îÇ   ‚îú‚îÄ‚îÄ exceptions/   - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ factories/    - –§–∞–±—Ä–∏–∫–∏ –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ mappers/      - Mappers –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ queries/      - DTO —á—Ç–µ–Ω–∏—è (Read), DTO-only: final readonly, –±–µ–∑ infra
  ‚îÇ   ‚îú‚îÄ‚îÄ usecases/     - –ö–ª–∞—Å—Å—ã Use Case (execute)
infrastructure/         - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π (Framework Logic)
  ‚îú‚îÄ‚îÄ adapters/         - –ê–¥–∞–ø—Ç–µ—Ä—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  ‚îú‚îÄ‚îÄ components/       - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  ‚îú‚îÄ‚îÄ factories/        - –§–∞–±—Ä–∏–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  ‚îú‚îÄ‚îÄ listeners/        - Event Listeners
  ‚îú‚îÄ‚îÄ mapping/          - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞
  ‚îú‚îÄ‚îÄ persistence/      - ActiveRecord –º–æ–¥–µ–ª–∏ (Mapping)
  ‚îú‚îÄ‚îÄ phpstan/          - –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞ PHPStan
  ‚îú‚îÄ‚îÄ queries/          - Query Services
  ‚îú‚îÄ‚îÄ queue/            - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π
  ‚îú‚îÄ‚îÄ repositories/     - –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Repository (—á–µ—Ä–µ–∑ AR)
  ‚îú‚îÄ‚îÄ services/         - –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
presentation/           - –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (UI/API)
  ‚îú‚îÄ‚îÄ common/           - –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  ‚îú‚îÄ‚îÄ components/       - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  ‚îú‚îÄ‚îÄ controllers/      - –û–±—â–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
  ‚îú‚îÄ‚îÄ dto/              - DTO —É—Ä–æ–≤–Ω—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
  ‚îú‚îÄ‚îÄ mail/             - –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º
  ‚îú‚îÄ‚îÄ services/         - –û–±—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
  ‚îú‚îÄ‚îÄ views/            - –®–∞–±–ª–æ–Ω—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
  ‚îú‚îÄ‚îÄ widgets/          - UI –≤–∏–¥–∂–µ—Ç—ã
  ‚îú‚îÄ‚îÄ {{module}}/
  ‚îÇ   ‚îú‚îÄ‚îÄ dto/          - DTO —É—Ä–æ–≤–Ω—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
  ‚îÇ   ‚îú‚îÄ‚îÄ forms/        - –§–æ—Ä–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  ‚îÇ   ‚îú‚îÄ‚îÄ handlers/     - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  ‚îÇ   ‚îú‚îÄ‚îÄ mappers/      - Mappers –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ services/     - –°–µ—Ä–≤–∏—Å—ã –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ validators/   - –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ widgets/      - –í–∏–¥–∂–µ—Ç—ã –º–æ–¥—É–ª—è
assets/                 - Frontend assets
bin/                    - CLI —É—Ç–∏–ª–∏—Ç—ã
  ‚îú‚îÄ‚îÄ lib/              - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ CLI —É—Ç–∏–ª–∏—Ç
commands/               - Console –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
  ‚îú‚îÄ‚îÄ support/          - –°–ª—É–∂–µ–±–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –≤—ã–≤–æ–¥ –∫–∞—Ä—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
config/                 - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚îú‚îÄ‚îÄ container/        - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
docker/                 - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ nginx/            - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
docs/                   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ ai/               - –ü—Ä–∞–≤–∏–ª–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI
  ‚îú‚îÄ‚îÄ auto/             - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
messages/               - –ü–µ—Ä–µ–≤–æ–¥—ã i18n
migrations/             - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
runtime/                - Runtime –∫—ç—à –∏ –ª–æ–≥–∏
tests/                  - –¢–µ—Å—Ç—ã
tools/                  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  ‚îú‚îÄ‚îÄ PHPUnit/          - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PHPUnit
  ‚îú‚îÄ‚îÄ Rector/           - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Rector
web/                    - Web root
```

–°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π:

| –ú–æ–¥—É–ª—å        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ              |
| ------------- | ----------------------- |
| auth          | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–µ—Å—Å–∏–∏    |
| authors       | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞–º–∏     |
| books         | –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥            |
| reports       | –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã    |
| subscriptions | –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |

**–ù–µ–∑–∞–≤–∏—Å–∏–º—ã –æ—Ç Yii:** `application/` –∏ `domain/`.

**–ó–∞–≤–∏—Å—è—Ç –æ—Ç Yii:** `infrastructure/` –∏ `presentation/`.

[‚Üë –ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
