meta:
  title: 'ActiveRecord Models'
  updated_at: '2026-01-10T00:39:15+00:00'
models:
  AsyncIdempotencyLog:
    name: AsyncIdempotencyLog
    class: app\infrastructure\persistence\AsyncIdempotencyLog
    table: '{{%async_idempotency_log}}'
    behaviors: {}
    relations: {}
    validation:
      - 'idempotency_key,created_at (required)'
      - 'created_at (integer)'
      - 'idempotency_key (string)'
      - 'idempotency_key (unique)'
  Author:
    name: Author
    class: app\infrastructure\persistence\Author
    table: authors
    behaviors: {}
    relations:
      -
        method: getBooks()
        type: hasMany
        target: Book
        via: book_authors
    validation:
      - 'fio (required)'
      - 'fio (string)'
  Book:
    name: Book
    class: app\infrastructure\persistence\Book
    table: books
    behaviors:
      - TimestampBehavior
    relations:
      -
        method: getAuthors()
        type: hasMany
        target: Author
        via: book_authors
    validation:
      - 'title,year,isbn (required)'
      - 'year (integer)'
      - 'description (string)'
      - 'title (string)'
      - 'isbn (string)'
      - 'cover_url (string)'
      - 'is_published (boolean)'
  IdempotencyKey:
    name: IdempotencyKey
    class: app\infrastructure\persistence\IdempotencyKey
    table: '{{%idempotency_keys}}'
    behaviors: {}
    relations: {}
    validation:
      - 'idempotency_key,status,created_at,expires_at (required)'
      - 'status_code,created_at,expires_at (integer)'
      - 'response_body (string)'
      - 'idempotency_key (string)'
      - 'idempotency_key (unique)'
      - 'status (string)'
  Subscription:
    name: Subscription
    class: app\infrastructure\persistence\Subscription
    table: subscriptions
    behaviors:
      - TimestampBehavior
    relations:
      -
        method: getAuthor()
        type: hasOne
        target: Author
        via: null
    validation:
      - 'phone,author_id (required)'
      - 'author_id (integer)'
      - 'phone (string)'
