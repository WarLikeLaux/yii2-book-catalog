openapi: 3.0.0
info:
  title: 'Yii2 Book Catalog API'
  description: 'Документация API каталога книг на Yii2'
  version: 1.0.0
servers:
  -
    url: 'http://localhost:8000'
    description: 'Локальный сервер разработки'
paths:
  /health:
    get:
      tags:
        - 'Health'
      summary: 'Проверка здоровья приложения (health check)'
      responses:
        '200':
          description: 'Приложение здорово'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthReport'
        '503':
          description: 'Один или несколько компонентов неисправны'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthReport'
  /api/v1/books:
    get:
      tags:
        - 'API Books'
      summary: 'Получить список книг (JSON)'
      operationId: 8fd7c19bee1afa0a4b6f916dfbfe4ab8
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: limit
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: 'JSON список книг'
          content:
            application/json:
              schema:
                properties:
                  items: { type: array, items: { $ref: '#/components/schemas/Book' } }
                  _meta: { $ref: '#/components/schemas/PaginationMeta' }
                type: object
components:
  schemas:
    Book:
      title: Book
      description: Книга
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: 'Чистый код'
        year:
          type: integer
          example: 2008
          nullable: true
        description:
          type: string
          example: 'Руководство по созданию качественного кода'
          nullable: true
        isbn:
          type: string
          example: 978-0-13-235088-4
        authorIds:
          type: array
          items:
            type: integer
          example:
            - 1
        authorNames:
          type: object
          example:
            '1': 'Роберт Мартин'
          additionalProperties:
            type: string
        coverUrl:
          type: string
          example: /uploads/covers/clean-code.jpg
          nullable: true
      type: object
    PaginationMeta:
      title: 'Pagination Meta'
      description: 'Метаданные пагинации'
      properties:
        totalCount:
          type: integer
          example: 100
        pageCount:
          type: integer
          example: 10
        currentPage:
          type: integer
          example: 1
        perPage:
          type: integer
          example: 10
      type: object
    HealthReport:
      title: 'Health Report'
      description: 'Отчет о здоровье приложения'
      properties:
        status:
          type: string
          example: 'healthy'
        timestamp:
          type: string
          format: date-time
          example: '2026-02-08T03:52:00+06:00'
        version:
          type: string
          example: '1.0.0'
        checks:
          type: object
          description: 'Детальная информация по каждому компоненту'
          additionalProperties:
            type: object
            properties:
              status:
                type: string
                example: 'up'
              latency_ms:
                type: number
                example: 2.3
      type: object
tags:
  -
    name: 'API Books'
    description: 'REST API для работы с книгами'
